package com.reactlibrary;

import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.util.Log;
import android.widget.Toast;

import com.example.callblockingbrodcastreciever.BlockActivity;
import com.example.callblockingbrodcastreciever.PhoneCallStateListener;
import com.facebook.react.bridge.ReactApplicationContext;
import com.facebook.react.bridge.ReactContextBaseJavaModule;
import com.facebook.react.bridge.ReactMethod;

import static com.facebook.react.views.view.ReactViewManager.REACT_CLASS;

public class RNNopeCallBlockNativeCodeModule extends ReactContextBaseJavaModule {

  private final ReactApplicationContext reactContext;

  public RNNopeCallBlockNativeCodeModule(ReactApplicationContext reactContext) {
    super(reactContext);
    this.reactContext = reactContext;
  }

  @Override
  public String getName() {
    return "RNNopeCallBlockNativeCode";
  }

  @ReactMethod
  public void gotoCallBlockScreen() {
    Log.d(REACT_CLASS, "start scan Chromecast ");
    reactContext.startActivity(new Intent(reactContext, BlockActivity.class));
    Toast.makeText(reactContext, "Response: ", Toast.LENGTH_LONG).show();
  }

  @ReactMethod
  public void addNumbersToPrefrences(String numbers) {
    Toast.makeText(reactContext, "Response: "+numbers, Toast.LENGTH_LONG).show();

    SharedPreferences sharedPreferences=reactContext.getSharedPreferences("NOPPE_CALL_BLOCKING_PREFFS", Context.MODE_PRIVATE);

    sharedPreferences.edit().putString("blocked_list", ""+numbers).apply();
  }
}